<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Create Travel</title>
    <link rel="website icon" th:type="png" th:href="@{/images/carpool_simplelogo.png}">
    <link rel="stylesheet" href="../static/reset.css" th:href="@{/reset.css}">
    <link rel="stylesheet" href="../static/header.css" th:href="@{/header.css}">
    <link rel="stylesheet" href="../static/footer.css" th:href="@{/footer.css}">
    <!--  <link rel="stylesheet" href="../static/newTravelStyles.css" th:href="@{/newTravelStyles.css}">-->
    <link rel="stylesheet" href="../static/feedbackStyles.css" th:href="@{/feedbackStyles.css}">
</head>
<body>
<!--HEADER-->
<header th:replace="index.html :: header"></header>
<section class="main">

    <h1 class="form-title">Create Feedback</h1>
    <form class="form"
          th:action="@{/travels/{travelId}/new/feedback/recipient/{recipientId}(travelId=${travelId},recipientId=${recipientId})}"
          th:object="${feedback}" method="post">
        <textarea id="textarea" th:field="*{comment}" placeholder="Comment (optional)"></textarea>
        <div class="stars-container">
            <span class="rating-label">Rating:</span>
            <div class="stars">
                <a class="star" data-value="1">
                    <i class="fa-solid fa-star"></i>
                </a>
                <a class="star" data-value="2">
                    <i class="fa-solid fa-star"></i>
                </a>
                <a class="star" data-value="3">
                    <i class="fa-solid fa-star"></i>
                </a>
                <a class="star" data-value="4">
                    <i class="fa-solid fa-star"></i>
                </a>
                <a class="star" data-value="5">
                    <i class="fa-solid fa-star"></i>
                </a>
            </div>
        </div>

        <input type="hidden" th:field="*{rating}" id="ratingValue" name="rating" value="0">
        <label class="error" th:errors="*{rating}"></label>
        <button class="btn" type="submit" value="Leave feedback">Leave feedback</button>
    </form>
</section>
<footer th:replace="index.html :: footer"></footer>

<script type="text/javascript" src="../static/js/showDropdown.js" th:src="@{/js/showDropdown.js}"></script>

<script type="text/javascript">
    const stars = document.querySelectorAll('.star');
    const ratingValueInput = document.getElementById('ratingValue');

    stars.forEach(star => {
        star.addEventListener('click', () => {
            const rating = star.getAttribute('data-value');
            ratingValueInput.value = rating;

            stars.forEach(s => s.classList.remove('active'));
            star.classList.add('active');
        });
    });
</script>

</body>
</html>